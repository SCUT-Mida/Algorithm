//============================================================================
// Name        : QuickSort.cpp
// Author      : @SCUT-Mida
// Version     : 1.0
// Copyright   : Your copyright notice
// Description : Algorithm--QuickSort in C++, Time complexity:worst¦¨(n^2);expect¦¨(nlgn)
//============================================================================

#include <iostream>
using namespace std;

#include "..\..\Include\common.h"                      //The common struct for Algorithm

void swap(sortArray_t *sortArray,int index_i,int index_j)   //sortArray[index_i]<==>sortArray[index_j]
{
	SORT_TYPE temp;
	temp = sortArray->array[index_i];
	sortArray->array[index_i] = sortArray->array[index_j];
	sortArray->array[index_j] = temp;
}

void Partition(sortArray_t *sortArray,int low,int high)    //To split the site array
{
	SORT_TYPE pivotKey = sortArray->array[low];    //Select the fist element as the pivot
	while(low < high)
	{
		while((low < high)&&(sortArray->array[high] >= pivotKey))
				high--;

	}
}

void buildHeap(sortArray_t *sortArray)		//build the MaxHeap
{
	for(int i = sortArray->Length / 2; i > 0 ; i--)
		HeapAdjust(sortArray,i,sortArray->Length);
}

void HeapSort(sortArray_t *sortArray)
{
	buildHeap(sortArray);
	for(int i = sortArray->Length; i > 1 ; i--)
	{
		swap(sortArray,1,i);
		HeapAdjust(sortArray,1,i-1);
	}
}

int main()
{
	SORT_TYPE OriginalData[9] = {50,10,90,30,70,40,80,60,20};
	sortArray_t sortArray;
	sortArray.array = new SORT_TYPE[10];
	sortArray.Length = 9;
	sortArray.array[0] = 0;
	for(int i = 0 ; i < sortArray.Length ; i++)
		sortArray.array[i+1] = OriginalData[i];

	cout << "!!!The Original Data!!!" << endl;
	for(int i = 0 ; i < sortArray.Length ; i++)
		cout << OriginalData[i] << " ";
	cout <<endl;
	HeapSort(&sortArray);

	cout << "!!!The HeapSort Data!!!" << endl;
	for(int i = 0 ; i < sortArray.Length ; i++)
			cout << sortArray.array[i+1] << " ";
		cout <<endl;

	return 0;
}
